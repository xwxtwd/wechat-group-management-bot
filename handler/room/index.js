/**
 * Created by J.Son on 2020/3/22
 */
const {Wechaty, Message, Contact, MediaMessage, MiniProgram, UrlLink} = require('wechaty');

const dbGroup = require('../../db/group');
const dbWatchGroup = require('../../db/watchGroup');
const blackListHandler = require('./blackList');
const blackListKeyword = ['/:MMWeak', '[弱]'];
const adminKickKeyword = ['[再见]江湖再见'];

// 检查是否触发关键词
function triggerKeyword (content, keywordList) {
  for (let i = 0; i < keywordList.length; i++) {
    const keyword = keywordList[i];
    if (content.search(keyword) !== -1) {
      return true;
    }
  }
  return false;
}

// 判断是否群组管理员
async function isAdmin (message, member) {
  let isAdmin = false;
  const room = message.room();
  if (room.payload.adminIdList.indexOf(member.id) !== -1 ||
    room.payload.ownerId === member.id
  ) {
    return Promise.resolve(true);
  }
  const roomInfo = await dbGroup.getGroupInfo(room.id);
  if (roomInfo.adminId === member.id) {
    return Promise.resolve(true);
  }
  return Promise.resolve(isAdmin);
}

exports = module.exports = async function (message) {
  const sender = message.from();
  const room = message.room();
  const content = message.text();
  const self = this.userSelf();
  const contentText = content.replace(new RegExp('@' + self.name() + '\\s'), '');
  const mentionedList = await message.mentionList();
  console.log(contentText);
  // 查询该群组是否需要监控
  const roomIsWatch = await dbWatchGroup.getGroupIsWatch(room.id);
  if (roomIsWatch) {
    if (mentionedList.length) {
      // 有被at的列表
      let isAtBot = false;
      let mentionedListHasAdmin = false;
      for (let i = 0; i < mentionedList.length; i++) {
        if (mentionedList[i].self()) {
          isAtBot = true;
        }
        if (await isAdmin(message, mentionedList[i])) mentionedListHasAdmin = true;
      }
      if (triggerKeyword(content, adminKickKeyword)) {
        if (await isAdmin(message, sender)) {
          // 触发管理员请出所有管理的群
          const groupList = await dbGroup.getGroupInfoByAdminId(sender.id);
          console.log('数据库查找到的群组：', groupList);
          for (let i = 0; i < groupList.length; i++) {
            const group = groupList[i];
            const rooms = await this.room.findAll({topic: group.topic});
            console.log('微信查找到的群组：', rooms);
            const mentionedList = await message.mentionList();
            for (let j = 0; j < rooms.length; j++) {
              const room = rooms[i];
              for (let z = 0; z < mentionedList.length; z++) {
                const mention = mentionedList[z];
                if (await room.has(mention)) {
                  if (room.payload.ownerId === self.id) {
                    console.log(room.topic + '群主是机器人');
                    await room.del(mention);
                  } else {
                    const owner = await room.owner();
                    console.log(room.topic + '群主是' + owner.name());
                    room.say(`请求群主把${mention.name()}请出群聊`, owner)
                  }
                }
              }
            }
          }
          return false;
        }
      }
      if (triggerKeyword(content, blackListKeyword)) {
        // 触发黑名单
        const warnTextAry = [`干什么？想踢我出去是吗？`, `老铁，我告诉你，你在挑战权威！！`];
        const warnText = warnTextAry[parseInt(Math.random() * warnTextAry.length)];
        if (isAtBot) return message.say(sender.name() + ', ' + warnText);
        if (mentionedListHasAdmin) return message.say(sender.name() + ', ' + warnText);
        await blackListHandler(message);
      }
    } else {
      // 其他消息监控
      if (/(机器人)?取消辅助/.test(contentText)) {
        await dbWatchGroup.dropGroup({
          id: room.id,
          creatorId: sender.id
        });
      }
    }
    if (/战绩/.test(contentText)) {
      const linkPayload = new UrlLink({
        description: `${sender.name()}, 这么菜，你就别看了`,
        thumbnailUrl: 'data:image/jpeg;base64,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',
        title: '王者最新战绩',
        url: 'https://game.weixin.qq.com/cgi-bin/h5/static/smobadynamic/dynamic.html?ssid=1',
      });
      return message.say(linkPayload);
    } else if (/战报/.test(contentText)) {
      const linkPayload = new UrlLink({
        description: `${sender.name()}, 积分王者，你就别看了`,
        thumbnailUrl: 'data:image/jpeg;base64,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',
        title: '王者战报',
        url: 'https://game.weixin.qq.com/cgi-bin/h5/static/smobaweekreport/index.html?ssid=1&partition=4046&from=singlemessage&isappinstalled=1',
      });
      return message.say(linkPayload);
    }
  } else {
    if (/机器人辅助/.test(contentText)) {
      await dbWatchGroup.insertGroup({
        id: room.id,
        creatorId: sender.id
      });
    }
  }

};
